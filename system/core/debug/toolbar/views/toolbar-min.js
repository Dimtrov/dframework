var ciDebugBar={toolbarContainer:null,toolbar:null,icon:null,init:function(){this.toolbarContainer=document.getElementById("toolbarContainer"),this.toolbar=document.getElementById("debug-bar"),this.icon=document.getElementById("debug-icon"),ciDebugBar.createListeners(),ciDebugBar.setToolbarState(),ciDebugBar.setToolbarPosition(),ciDebugBar.setToolbarTheme(),ciDebugBar.toggleViewsHints(),document.getElementById("debug-bar-link").addEventListener("click",ciDebugBar.toggleToolbar,!0),document.getElementById("debug-icon-link").addEventListener("click",ciDebugBar.toggleToolbar,!0);var e=document.querySelector('button[data-time="'+localStorage.getItem("debugbar-time")+'"]');ciDebugBar.addClass(e.parentNode.parentNode,"current"),historyLoad=document.getElementsByClassName("ci-history-load");for(var t=0;t<historyLoad.length;t++)historyLoad[t].addEventListener("click",(function(){loadDoc(this.getAttribute("data-time"))}),!0);var a=ciDebugBar.readCookie("debug-bar-tab");if(document.getElementById(a)){var o=document.getElementById(a);o.style.display="block",ciDebugBar.addClass(o,"active"),(a=document.querySelector("[data-tab="+a+"]"))&&ciDebugBar.addClass(a.parentNode,"active")}},createListeners:function(){for(var e=[].slice.call(document.querySelectorAll("#debug-bar .ci-label a")),t=0;t<e.length;t++)e[t].addEventListener("click",ciDebugBar.showTab,!0)},showTab:function(){var e=document.getElementById(this.getAttribute("data-tab"));if(e){ciDebugBar.createCookie("debug-bar-tab","",-1);for(var t=e.style.display,a=document.querySelectorAll("#debug-bar .tab"),o=0;o<a.length;o++)a[o].style.display="none";var r=document.querySelectorAll("#debug-bar .ci-label");for(o=0;o<r.length;o++)ciDebugBar.removeClass(r[o],"active");"block"!=t&&(e.style.display="block",ciDebugBar.addClass(this.parentNode,"active"),ciDebugBar.createCookie("debug-bar-tab",this.getAttribute("data-tab"),365))}},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},toggleDataTable:function(e){"string"==typeof e&&(e=document.getElementById(e+"_table")),e&&(e.style.display="none"==e.style.display?"block":"none")},toggleToolbar:function(){var e="none"!=ciDebugBar.toolbar.style.display;ciDebugBar.icon.style.display=1==e?"inline-block":"none",ciDebugBar.toolbar.style.display=0==e?"inline-block":"none",ciDebugBar.createCookie("debug-bar-state","",-1),ciDebugBar.createCookie("debug-bar-state",1==e?"minimized":"open",365)},setToolbarState:function(){var e=ciDebugBar.readCookie("debug-bar-state");ciDebugBar.icon.style.display="open"!=e?"inline-block":"none",ciDebugBar.toolbar.style.display="open"==e?"inline-block":"none"},toggleViewsHints:function(){if(localStorage.getItem("debugbar-time")!=localStorage.getItem("debugbar-time-new"))return void(document.querySelector('a[data-tab="ci-views"]').href="#");var e=[],t=[],a=function(e,t){return null===e.parentNode?null:e.parentNode!==t?a(e.parentNode,t):e};const o=["NOSCRIPT","SCRIPT","STYLE"],r=["HTML","BODY","HEAD"];var i=function(e,t){if(-1!==r.indexOf(e.nodeName)){for(var a=0;a<document.body.children.length;++a){var i=t?document.body.children.length-(a+1):a,n=document.body.children[i];if(-1===o.indexOf(n.nodeName))return[n,t]}return null}for(;null!==e&&-1!==o.indexOf(e.nodeName);)e=t?e.previousElementSibling:e.nextElementSibling;return null===e?null:[e,t]},n=function(e){if(e){if(null!==e.nextElementSibling)return i(e.nextElementSibling,!1)||i(e.previousElementSibling,!0);if(null!==e.previousElementSibling)return i(e.previousElementSibling,!0)}return null};function l(){for(var r in t=function(){for(var e=[],t=[],a=document.evaluate("//comment()[starts-with(., ' DEBUG-VIEW')]",document,null,XPathResult.ANY_TYPE,null),o=a.iterateNext();o;)e.push(o),o=a.iterateNext();for(var r=0;r<e.length;++r){var i=e[r].nodeValue.substring(18,e[r].nodeValue.length-1);"S"===e[r].nodeValue[12]?t[i]=[e[r],null]:t[i]&&(t[i][1]=e[r])}return t}()){var i=n(t[r][0]),l=n(t[r][1]);if(null!==i&&null!==l){var d=a(l[0],i[0].parentNode);if(null===d){if(null===(d=a(i[0],l[0].parentNode)))continue;i[0]=d}else l[0]=d;var u,b,s=document.createElement("div"),g=document.createElement("div"),m=i[0].parentNode.childNodes,B=i[0].parentNode;s.classList.add("debug-view"),s.classList.add("show-view"),g.classList.add("debug-view-path"),g.innerText=r,s.appendChild(g);for(var h=0;h<m.length;++h)if(m[h]===t[r][1]||m[h]===t[r][0]||m[h]===i[0]){u=h,m[h]===t[r][0]&&u++;break}i[1]&&u++;for(h=u;h<m.length;++h)if(m[h]===l[0])b=h;else if(m[h]===t[r][1]){b=h;break}var f=b-u;l[1]&&f++;for(h=0;h<f;++h)-1===o.indexOf(m[u])?s.appendChild(m[u]):u++;e.push(B.insertBefore(s,m[u]))}}ciDebugBar.createCookie("debug-view","show",365),ciDebugBar.addClass(c,"active")}var c=document.querySelector("[data-tab=ci-views]");c&&(c.parentNode.onclick=function(){ciDebugBar.readCookie("debug-view")?function(){for(var t=0;t<e.length;++t){for(var a,o=0;o<e[t].parentNode.childNodes.length;++o)if(e[t].parentNode.childNodes[o]===e[t]){a=o;break}for(;1!==e[t].childNodes.length;)e[t].parentNode.insertBefore(e[t].childNodes[1],e[t].parentNode.childNodes[a].nextSibling),a++;e[t].parentNode.removeChild(e[t])}e.length=0,ciDebugBar.createCookie("debug-view","",-1),ciDebugBar.removeClass(c,"active")}():l()},ciDebugBar.readCookie("debug-view")&&l())},setToolbarPosition:function(){var e=document.getElementById("toolbar-position");"top"===ciDebugBar.readCookie("debug-bar-position")&&(ciDebugBar.addClass(ciDebugBar.icon,"fixed-top"),ciDebugBar.addClass(ciDebugBar.toolbar,"fixed-top")),e.addEventListener("click",(function(){var e=ciDebugBar.readCookie("debug-bar-position");ciDebugBar.createCookie("debug-bar-position","",-1),e&&"bottom"!==e?(ciDebugBar.createCookie("debug-bar-position","bottom",365),ciDebugBar.removeClass(ciDebugBar.icon,"fixed-top"),ciDebugBar.removeClass(ciDebugBar.toolbar,"fixed-top")):(ciDebugBar.createCookie("debug-bar-position","top",365),ciDebugBar.addClass(ciDebugBar.icon,"fixed-top"),ciDebugBar.addClass(ciDebugBar.toolbar,"fixed-top"))}),!0)},setToolbarTheme:function(){var e=document.getElementById("toolbar-theme");window.matchMedia("(prefers-color-scheme: dark)").matches,window.matchMedia("(prefers-color-scheme: light)").matches;"dark"===ciDebugBar.readCookie("debug-bar-theme")?(ciDebugBar.removeClass(ciDebugBar.toolbarContainer,"light"),ciDebugBar.addClass(ciDebugBar.toolbarContainer,"dark")):"light"===ciDebugBar.readCookie("debug-bar-theme")&&(ciDebugBar.removeClass(ciDebugBar.toolbarContainer,"dark"),ciDebugBar.addClass(ciDebugBar.toolbarContainer,"light")),e.addEventListener("click",(function(){var e=ciDebugBar.readCookie("debug-bar-theme");!e&&window.matchMedia("(prefers-color-scheme: dark)").matches||"dark"===e?(ciDebugBar.createCookie("debug-bar-theme","light",365),ciDebugBar.removeClass(ciDebugBar.toolbarContainer,"dark"),ciDebugBar.addClass(ciDebugBar.toolbarContainer,"light")):(ciDebugBar.createCookie("debug-bar-theme","dark",365),ciDebugBar.removeClass(ciDebugBar.toolbarContainer,"light"),ciDebugBar.addClass(ciDebugBar.toolbarContainer,"dark"))}),!0)},createCookie:function(e,t,a){if(a){var o=new Date;o.setTime(o.getTime()+24*a*60*60*1e3);var r="; expires="+o.toGMTString()}else r="";document.cookie=e+"="+t+r+"; path=/"},readCookie:function(e){for(var t=e+"=",a=document.cookie.split(";"),o=0;o<a.length;o++){for(var r=a[o];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}};